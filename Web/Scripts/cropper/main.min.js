$(function(){"use strict";var t=window.console||{log:function(){}},u=window.URL||window.webkitURL,n=$("#image2"),o=$("#dataX"),s=$("#dataY"),h=$("#dataHeight"),c=$("#dataWidth"),l=$("#dataRotate"),a=$("#dataScaleX"),v=$("#dataScaleY"),y=$("#SendAll"),r={aspectRatio:4/5,preview:".img-preview",crop:function(n){o.val(Math.round(n.x));s.val(Math.round(n.y));h.val(Math.round(n.height));c.val(Math.round(n.width));l.val(n.rotate);a.val(n.scaleX);v.val(n.scaleY)}},p=n.attr("src"),e="image/jpeg",i,f;$('[data-toggle="tooltip"]').tooltip();n.on({ready:function(n){t.log(n.type)},cropstart:function(n){t.log(n.type,n.action)},cropmove:function(n){t.log(n.type,n.action)},cropend:function(n){t.log(n.type,n.action)},crop:function(n){t.log(n.type,n.x,n.y,n.width,n.height,n.rotate,n.scaleX,n.scaleY)},zoom:function(n){t.log(n.type,n.ratio)}}).cropper(r);$.isFunction(document.createElement("canvas").getContext)||$('button[data-method="getCroppedCanvas"]').prop("disabled",!0);typeof document.createElement("cropper").style.transition=="undefined"&&($('button[data-method="rotate"]').prop("disabled",!0),$('button[data-method="scale"]').prop("disabled",!0));$(".docs-toggles").on("change","input",function(){var t=$(this),i=t.attr("name"),u=t.prop("type"),f,e;n.data("cropper")&&(u==="checkbox"?(r[i]=t.prop("checked"),f=n.cropper("getCropBoxData"),e=n.cropper("getCanvasData"),r.ready=function(){n.cropper("setCropBoxData",f);n.cropper("setCanvasData",e)}):u==="radio"&&(r[i]=t.val()),n.cropper("destroy").cropper(r))});$(".docs-buttons").on("click","[data-method]",function(){var s=$(this),r=s.data(),o,f;if(!s.prop("disabled")&&!s.hasClass("disabled")&&n.data("cropper")&&r.method){if(r=$.extend({},r),typeof r.target!="undefined"&&(o=$(r.target),typeof r.option=="undefined"))try{r.option=JSON.parse(o.val())}catch(h){t.log(h.message)}switch(r.method){case"rotate":n.cropper("clear");break;case"getCroppedCanvas":e==="image/jpeg"&&(r.option||(r.option={}),r.option.fillColor="#fff")}f=n.cropper(r.method,r.option,r.secondOption);switch(r.method){case"rotate":n.cropper("crop");break;case"scaleX":case"scaleY":$(this).data("option",-r.option);break;case"getCroppedCanvas":f&&($(".result-img").html(`<img id="post-image" style="min-width:500px" src="${f.toDataURL(e)}" />`),y.removeClass("hidden"));break;case"destroy":i&&(u.revokeObjectURL(i),i="",n.attr("src",p))}if($.isPlainObject(f)&&o)try{o.val(JSON.stringify(f))}catch(h){t.log(h.message)}}});$(document.body).on("keydown",function(t){if(n.data("cropper")&&!(this.scrollTop>300))switch(t.which){case 37:t.preventDefault();n.cropper("move",-1,0);break;case 38:t.preventDefault();n.cropper("move",0,-1);break;case 39:t.preventDefault();n.cropper("move",1,0);break;case 40:t.preventDefault();n.cropper("move",0,1)}});f=$("#inputImage");u?f.change(function(){var o=this.files,t;n.data("cropper")&&o&&o.length&&(t=o[0],/^image\/\w+$/.test(t.type)?(e=t.type,i&&u.revokeObjectURL(i),i=u.createObjectURL(t),n.cropper("destroy").attr("src",i).cropper(r),f.val("")):window.alert("Please choose an image file."))}):f.prop("disabled",!0).parent().addClass("disabled")});