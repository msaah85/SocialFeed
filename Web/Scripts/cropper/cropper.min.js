/*!
 * Cropper v2.3.4
 * https://github.com/fengyuanchen/cropper
 *
 * Copyright (c) 2014-2016 Fengyuan Chen and contributors
 * Released under the MIT license
 *
 * Date: 2016-09-03T05:50:45.412Z
 */
(function(n){typeof define=="function"&&define.amd?define(["jquery"],n):typeof exports=="object"?n(require("jquery")):n(jQuery)})(function(n){"use strict";function i(n){return typeof n=="number"&&!isNaN(n)}function c(n){return typeof n=="undefined"}function lt(n,t){var r=[];return i(t)&&r.push(t),r.slice.apply(n,r)}function at(n,t){var i=lt(arguments,2);return function(){return n.apply(t,i.concat(lt(arguments)))}}function ki(n){var t=n.match(/^(https?:)\/\/([^\:\/\?#]+):?(\d*)/i);return t&&(t[1]!==tt.protocol||t[2]!==tt.hostname||t[3]!==tt.port)}function di(n){var t="timestamp="+(new Date).getTime();return n+(n.indexOf("?")===-1?"?":"&")+t}function gi(n){return n?' crossOrigin="'+n+'"':""}function ar(n,t){var i;if(n.naturalWidth&&!yi)return t(n.naturalWidth,n.naturalHeight);i=document.createElement("img");i.onload=function(){t(this.width,this.height)};i.src=n.src}function vt(n){var t=[],r=n.rotate,u=n.scaleX,f=n.scaleY;return i(r)&&r!==0&&t.push("rotate("+r+"deg)"),i(u)&&u!==1&&t.push("scaleX("+u+")"),i(f)&&f!==1&&t.push("scaleY("+f+")"),t.length?t.join(" "):"none"}function nt(n,t){var r=h(n.degree)%180,s=(r>90?180-r:r)*Math.PI/180,u=cr(s),f=lr(s),e=n.width,c=n.height,l=n.aspectRatio,i,o;return t?(i=e/(f+u/l),o=i/l):(i=e*f+c*u,o=e*u+c*f),{width:i,height:o}}function nr(t,r){var s=n("<canvas>")[0],u=s.getContext("2d"),g=0,tt=0,v=r.naturalWidth,y=r.naturalHeight,c=r.rotate,l=r.scaleX,a=r.scaleY,p=i(l)&&i(a)&&(l!==1||a!==1),w=i(c)&&c!==0,it=w||p,e=v*h(l||1),o=y*h(a||1),b,k,d;return p&&(b=e/2,k=o/2),w&&(d=nt({width:e,height:o,degree:c}),e=d.width,o=d.height,b=e/2,k=o/2),s.width=e,s.height=o,it&&(g=-v/2,tt=-y/2,u.save(),u.translate(b,k)),w&&u.rotate(c*Math.PI/180),p&&u.scale(l,a),u.drawImage(t,f(g),f(tt),f(v),f(y)),it&&u.restore(),s}function vr(t){var i=t.length,r=0,u=0;return i&&(n.each(t,function(n,t){r+=t.pageX;u+=t.pageY}),r/=i,u/=i),{pageX:r,pageY:u}}function yr(n,t,i){var u="",r;for(r=t,i+=t;r<i;r++)u+=bi(n.getUint8(r));return u}function pr(n){var t=new tr(n),s=t.byteLength,l,a,u,h,r,c,f,e,i,o;if(t.getUint8(0)===255&&t.getUint8(1)===216)for(i=2;i<s;){if(t.getUint8(i)===255&&t.getUint8(i+1)===225){f=i;break}i++}if(f&&(a=f+4,u=f+10,yr(t,a,4)==="Exif"&&(c=t.getUint16(u),r=c===18761,(r||c===19789)&&t.getUint16(u+2,r)===42&&(h=t.getUint32(u+4,r),h>=8&&(e=u+h)))),e)for(s=t.getUint16(e,r),o=0;o<s;o++)if(i=e+o*12+2,t.getUint16(i,r)===274){i+=8;l=t.getUint16(i,r);yi&&t.setUint16(i,1,r);break}return l}function wr(n){for(var f=n.replace(or,""),i=atob(f),r=i.length,u=new bt(r),e=new kt(u),t=0;t<r;t++)e[t]=i.charCodeAt(t);return u}function br(n){for(var i=new kt(n),u=i.length,r="",t=0;t<u;t++)r+=bi(i[t]);return"data:image/jpeg;base64,"+ir(r)}function s(t,i){this.$element=n(t);this.options=n.extend({},s.DEFAULTS,n.isPlainObject(i)&&i);this.isLoaded=!1;this.isBuilt=!1;this.isCompleted=!1;this.isRotated=!1;this.isCropped=!1;this.isDisabled=!1;this.isReplaced=!1;this.isLimited=!1;this.wheeling=!1;this.isImg=!1;this.originalUrl="";this.canvas=null;this.cropBox=null;this.init()}var yt=n(window),pt=n(document),tt=window.location,wt=window.navigator,bt=window.ArrayBuffer,kt=window.Uint8Array,tr=window.DataView,ir=window.btoa,e="cropper",l="cropper-modal",dt="cropper-hide",o="cropper-hidden",rr="cropper-invisible",it="cropper-move",rt="cropper-crop",gt="cropper-disabled",ur="cropper-bg",ni="mousedown touchstart pointerdown MSPointerDown",ti="mousemove touchmove pointermove MSPointerMove",ii="mouseup touchend touchcancel pointerup pointercancel MSPointerUp MSPointerCancel",ri="wheel mousewheel DOMMouseScroll",ui="dblclick",ut="load."+e,fi="error."+e,ei="resize."+e,oi="build."+e,si="built."+e,ft="cropstart."+e,et="cropmove."+e,ot="cropend."+e,b="crop."+e,st="zoom."+e,fr=/^(e|w|s|n|se|sw|ne|nw|all|crop|move|zoom)$/,er=/^data:/,or=/^data:([^;]+);base64,/,sr=/^data:image\/jpeg.*;base64,/,k="preview",a="action",hi="e",ci="w",li="s",ai="n",v="se",y="sw",p="ne",w="nw",ht="all",d="crop",g="move",ct="zoom",hr="none",vi=n.isFunction(n("<canvas>")[0].getContext),yi=wt&&/(Macintosh|iPhone|iPod|iPad).*AppleWebKit/i.test(wt.userAgent),u=Number,t=Math.min,r=Math.max,h=Math.abs,cr=Math.sin,lr=Math.cos,pi=Math.sqrt,wi=Math.round,f=Math.floor,bi=String.fromCharCode;s.prototype={constructor:s,init:function(){var n=this.$element,t;if(n.is("img")){if(this.isImg=!0,this.originalUrl=t=n.attr("src"),!t)return;t=n.prop("src")}else n.is("canvas")&&vi&&(t=n[0].toDataURL());this.load(t)},trigger:function(t,i){var r=n.Event(t,i);return this.$element.trigger(r),r},load:function(t){var r=this.options,f=this.$element,u,i;if(t){f.one(oi,r.build);if(!this.trigger(oi).isDefaultPrevented()){if(this.url=t,this.image={},!r.checkOrientation||!bt)return this.clone();if(u=n.proxy(this.read,this),er.test(t))return sr.test(t)?u(wr(t)):this.clone();i=new XMLHttpRequest;i.onerror=i.onabort=n.proxy(function(){this.clone()},this);i.onload=function(){u(this.response)};r.checkCrossOrigin&&ki(t)&&f.prop("crossOrigin")&&(t=di(t));i.open("get",t);i.responseType="arraybuffer";i.send()}}},read:function(n){var f=this.options,e=pr(n),i=this.image,t=0,r=1,u=1;if(e>1){this.url=br(n);switch(e){case 2:r=-1;break;case 3:t=-180;break;case 4:u=-1;break;case 5:t=90;u=-1;break;case 6:t=90;break;case 7:t=90;r=-1;break;case 8:t=-90}}f.rotatable&&(i.rotate=t);f.scalable&&(i.scaleX=r,i.scaleY=u);this.clone()},clone:function(){var e=this.options,i=this.$element,r=this.url,t="",u,f;if(e.checkCrossOrigin&&ki(r)&&(t=i.prop("crossOrigin"),t?u=r:(t="anonymous",u=di(r))),this.crossOrigin=t,this.crossOriginUrl=u,this.$clone=f=n("<img"+gi(t)+' src="'+(u||r)+'">'),this.isImg)if(i[0].complete)this.start();else i.one(ut,n.proxy(this.start,this));else f.one(ut,n.proxy(this.start,this)).one(fi,n.proxy(this.stop,this)).addClass(dt).insertAfter(i)},start:function(){var t=this.$element,i=this.$clone;this.isImg||(i.off(fi,this.stop),t=i);ar(t[0],n.proxy(function(t,i){n.extend(this.image,{naturalWidth:t,naturalHeight:i,aspectRatio:t/i});this.isLoaded=!0;this.build()},this))},stop:function(){this.$clone.remove();this.$clone=null},build:function(){var i=this.options,e=this.$element,c=this.$clone,u,f,h;if(this.isLoaded){this.isBuilt&&this.unbuild();this.$container=e.parent();this.$cropper=u=n(s.TEMPLATE);this.$canvas=u.find(".cropper-canvas").append(c);this.$dragBox=u.find(".cropper-drag-box");this.$cropBox=f=u.find(".cropper-crop-box");this.$viewBox=u.find(".cropper-view-box");this.$face=h=f.find(".cropper-face");e.addClass(o).after(u);this.isImg||c.removeClass(dt);this.initPreview();this.bind();i.aspectRatio=r(0,i.aspectRatio)||NaN;i.viewMode=r(0,t(3,wi(i.viewMode)))||0;i.autoCrop?(this.isCropped=!0,i.modal&&this.$dragBox.addClass(l)):f.addClass(o);i.guides||f.find(".cropper-dashed").addClass(o);i.center||f.find(".cropper-center").addClass(o);i.cropBoxMovable&&h.addClass(it).data(a,ht);i.highlight||h.addClass(rr);i.background&&u.addClass(ur);i.cropBoxResizable||f.find(".cropper-line, .cropper-point").addClass(o);this.setDragMode(i.dragMode);this.render();this.isBuilt=!0;this.setData(i.data);e.one(si,i.built);this.completing=setTimeout(n.proxy(function(){this.trigger(si);this.trigger(b,this.getData());this.isCompleted=!0},this),0)}},unbuild:function(){this.isBuilt&&(this.isCompleted||clearTimeout(this.completing),this.isBuilt=!1,this.isCompleted=!1,this.initialImage=null,this.initialCanvas=null,this.initialCropBox=null,this.container=null,this.canvas=null,this.cropBox=null,this.unbind(),this.resetPreview(),this.$preview=null,this.$viewBox=null,this.$cropBox=null,this.$dragBox=null,this.$canvas=null,this.$container=null,this.$cropper.remove(),this.$cropper=null)},render:function(){this.initContainer();this.initCanvas();this.initCropBox();this.renderCanvas();this.isCropped&&this.renderCropBox()},initContainer:function(){var t=this.options,i=this.$element,f=this.$container,n=this.$cropper;n.addClass(o);i.removeClass(o);n.css(this.container={width:r(f.width(),u(t.minContainerWidth)||200),height:r(f.height(),u(t.minContainerHeight)||100)});i.addClass(o);n.removeClass(o)},initCanvas:function(){var f=this.options.viewMode,c=this.container,r=c.width,u=c.height,e=this.image,l=e.naturalWidth,a=e.naturalHeight,v=h(e.rotate)===90,y=v?a:l,p=v?l:a,i=y/p,o=r,s=u,t;u*i>r?f===3?o=u*i:s=r/i:f===3?s=r/i:o=u*i;t={naturalWidth:y,naturalHeight:p,aspectRatio:i,width:o,height:s};t.oldLeft=t.left=(r-o)/2;t.oldTop=t.top=(u-s)/2;this.canvas=t;this.isLimited=f===1||f===2;this.limitCanvas(!0,!0);this.initialImage=n.extend({},e);this.initialCanvas=n.extend({},t)},limitCanvas:function(n,i){var w=this.options,c=w.viewMode,b=this.container,v=b.width,y=b.height,f=this.canvas,h=f.aspectRatio,s=this.cropBox,p=this.isCropped&&s,e,o,l,a;n&&(e=u(w.minCanvasWidth)||0,o=u(w.minCanvasHeight)||0,c&&(c>1?(e=r(e,v),o=r(o,y),c===3&&(o*h>e?e=o*h:o=e/h)):e?e=r(e,p?s.width:0):o?o=r(o,p?s.height:0):p&&(e=s.width,o=s.height,o*h>e?e=o*h:o=e/h)),e&&o?o*h>e?o=e/h:e=o*h:e?o=e/h:o&&(e=o*h),f.minWidth=e,f.minHeight=o,f.maxWidth=Infinity,f.maxHeight=Infinity);i&&(c?(l=v-f.width,a=y-f.height,f.minLeft=t(0,l),f.minTop=t(0,a),f.maxLeft=r(0,l),f.maxTop=r(0,a),p&&this.isLimited&&(f.minLeft=t(s.left,s.left+s.width-f.width),f.minTop=t(s.top,s.top+s.height-f.height),f.maxLeft=s.left,f.maxTop=s.top,c===2&&(f.width>=v&&(f.minLeft=t(0,l),f.maxLeft=r(0,l)),f.height>=y&&(f.minTop=t(0,a),f.maxTop=r(0,a))))):(f.minLeft=-f.width,f.minTop=-f.height,f.maxLeft=v,f.maxTop=y))},renderCanvas:function(n){var i=this.canvas,f=this.image,e=f.rotate,s=f.naturalWidth,h=f.naturalHeight,o,u;this.isRotated&&(this.isRotated=!1,u=nt({width:f.width,height:f.height,degree:e}),o=u.width/u.height,o!==i.aspectRatio&&(i.left-=(u.width-i.width)/2,i.top-=(u.height-i.height)/2,i.width=u.width,i.height=u.height,i.aspectRatio=o,i.naturalWidth=s,i.naturalHeight=h,e%180&&(u=nt({width:s,height:h,degree:e}),i.naturalWidth=u.width,i.naturalHeight=u.height),this.limitCanvas(!0,!1)));(i.width>i.maxWidth||i.width<i.minWidth)&&(i.left=i.oldLeft);(i.height>i.maxHeight||i.height<i.minHeight)&&(i.top=i.oldTop);i.width=t(r(i.width,i.minWidth),i.maxWidth);i.height=t(r(i.height,i.minHeight),i.maxHeight);this.limitCanvas(!1,!0);i.oldLeft=i.left=t(r(i.left,i.minLeft),i.maxLeft);i.oldTop=i.top=t(r(i.top,i.minTop),i.maxTop);this.$canvas.css({width:i.width,height:i.height,left:i.left,top:i.top});this.renderImage();this.isCropped&&this.isLimited&&this.limitCropBox(!0,!0);n&&this.output()},renderImage:function(t){var r=this.canvas,i=this.image,u;i.rotate&&(u=nt({width:r.width,height:r.height,degree:i.rotate,aspectRatio:i.aspectRatio},!0));n.extend(i,u?{width:u.width,height:u.height,left:(r.width-u.width)/2,top:(r.height-u.height)/2}:{width:r.width,height:r.height,left:0,top:0});this.$clone.css({width:i.width,height:i.height,marginLeft:i.left,marginTop:i.top,transform:vt(i)});t&&this.output()},initCropBox:function(){var o=this.options,f=this.canvas,e=o.aspectRatio,s=u(o.autoCropArea)||.8,i={width:f.width,height:f.height};e&&(f.height*e>f.width?i.height=i.width/e:i.width=i.height*e);this.cropBox=i;this.limitCropBox(!0,!0);i.width=t(r(i.width,i.minWidth),i.maxWidth);i.height=t(r(i.height,i.minHeight),i.maxHeight);i.width=r(i.minWidth,i.width*s);i.height=r(i.minHeight,i.height*s);i.oldLeft=i.left=f.left+(f.width-i.width)/2;i.oldTop=i.top=f.top+(f.height-i.height)/2;this.initialCropBox=n.extend({},i)},limitCropBox:function(n,i){var y=this.options,s=y.aspectRatio,w=this.container,a=w.width,v=w.height,h=this.canvas,f=this.cropBox,p=this.isLimited,e,o,c,l;n&&(e=u(y.minCropBoxWidth)||0,o=u(y.minCropBoxHeight)||0,e=t(e,a),o=t(o,v),c=t(a,p?h.width:a),l=t(v,p?h.height:v),s&&(e&&o?o*s>e?o=e/s:e=o*s:e?o=e/s:o&&(e=o*s),l*s>c?l=c/s:c=l*s),f.minWidth=t(e,c),f.minHeight=t(o,l),f.maxWidth=c,f.maxHeight=l);i&&(p?(f.minLeft=r(0,h.left),f.minTop=r(0,h.top),f.maxLeft=t(a,h.left+h.width)-f.width,f.maxTop=t(v,h.top+h.height)-f.height):(f.minLeft=0,f.minTop=0,f.maxLeft=a-f.width,f.maxTop=v-f.height))},renderCropBox:function(){var i=this.options,u=this.container,f=u.width,e=u.height,n=this.cropBox;(n.width>n.maxWidth||n.width<n.minWidth)&&(n.left=n.oldLeft);(n.height>n.maxHeight||n.height<n.minHeight)&&(n.top=n.oldTop);n.width=t(r(n.width,n.minWidth),n.maxWidth);n.height=t(r(n.height,n.minHeight),n.maxHeight);this.limitCropBox(!1,!0);n.oldLeft=n.left=t(r(n.left,n.minLeft),n.maxLeft);n.oldTop=n.top=t(r(n.top,n.minTop),n.maxTop);i.movable&&i.cropBoxMovable&&this.$face.data(a,n.width===f&&n.height===e?g:ht);this.$cropBox.css({width:n.width,height:n.height,left:n.left,top:n.top});this.isCropped&&this.isLimited&&this.limitCanvas(!0,!0);this.isDisabled||this.output()},output:function(){this.preview();this.isCompleted&&this.trigger(b,this.getData())},initPreview:function(){var t=gi(this.crossOrigin),i=t?this.crossOriginUrl:this.url,r;this.$preview=n(this.options.preview);this.$clone2=r=n("<img"+t+' src="'+i+'">');this.$viewBox.html(r);this.$preview.each(function(){var r=n(this);r.data(k,{width:r.width(),height:r.height(),html:r.html()});r.html("<img"+t+' src="'+i+'" style="display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;">')})},resetPreview:function(){this.$preview.each(function(){var i=n(this),t=i.data(k);i.css({width:t.width,height:t.height}).html(t.html).removeData(k)})},preview:function(){var t=this.image,f=this.canvas,i=this.cropBox,r=i.width,u=i.height,e=t.width,o=t.height,s=i.left-f.left-t.left,h=i.top-f.top-t.top;this.isCropped&&!this.isDisabled&&(this.$clone2.css({width:e,height:o,marginLeft:-s,marginTop:-h,transform:vt(t)}),this.$preview.each(function(){var l=n(this),a=l.data(k),v=a.width,f=a.height,y=v,c=f,i=1;r&&(i=v/r,c=u*i);u&&c>f&&(i=f/u,y=r*i,c=f);l.css({width:y,height:c}).find("img").css({width:e*i,height:o*i,marginLeft:-s*i,marginTop:-h*i,transform:vt(t)})}))},bind:function(){var t=this.options,i=this.$element,r=this.$cropper;if(n.isFunction(t.cropstart))i.on(ft,t.cropstart);if(n.isFunction(t.cropmove))i.on(et,t.cropmove);if(n.isFunction(t.cropend))i.on(ot,t.cropend);if(n.isFunction(t.crop))i.on(b,t.crop);if(n.isFunction(t.zoom))i.on(st,t.zoom);r.on(ni,n.proxy(this.cropStart,this));if(t.zoomable&&t.zoomOnWheel)r.on(ri,n.proxy(this.wheel,this));if(t.toggleDragModeOnDblclick)r.on(ui,n.proxy(this.dblclick,this));pt.on(ti,this._cropMove=at(this.cropMove,this)).on(ii,this._cropEnd=at(this.cropEnd,this));if(t.responsive)yt.on(ei,this._resize=at(this.resize,this))},unbind:function(){var t=this.options,i=this.$element,r=this.$cropper;n.isFunction(t.cropstart)&&i.off(ft,t.cropstart);n.isFunction(t.cropmove)&&i.off(et,t.cropmove);n.isFunction(t.cropend)&&i.off(ot,t.cropend);n.isFunction(t.crop)&&i.off(b,t.crop);n.isFunction(t.zoom)&&i.off(st,t.zoom);r.off(ni,this.cropStart);t.zoomable&&t.zoomOnWheel&&r.off(ri,this.wheel);t.toggleDragModeOnDblclick&&r.off(ui,this.dblclick);pt.off(ti,this._cropMove).off(ii,this._cropEnd);t.responsive&&yt.off(ei,this._resize)},resize:function(){var f=this.options.restore,e=this.$container,i=this.container,r,u,t;!this.isDisabled&&i&&(t=e.width()/i.width,(t!==1||e.height()!==i.height)&&(f&&(r=this.getCanvasData(),u=this.getCropBoxData()),this.render(),f&&(this.setCanvasData(n.each(r,function(n,i){r[n]=i*t})),this.setCropBoxData(n.each(u,function(n,i){u[n]=i*t})))))},dblclick:function(){this.isDisabled||(this.$dragBox.hasClass(rt)?this.setDragMode(g):this.setDragMode(d))},wheel:function(t){var i=t.originalEvent||t,f=u(this.options.wheelZoomRatio)||.1,r=1;this.isDisabled||(t.preventDefault(),this.wheeling)||(this.wheeling=!0,setTimeout(n.proxy(function(){this.wheeling=!1},this),50),i.deltaY?r=i.deltaY>0?1:-1:i.wheelDelta?r=-i.wheelDelta/120:i.detail&&(r=i.detail>0?1:-1),this.zoom(-r*f,t))},cropStart:function(t){var o=this.options,i=t.originalEvent,f=i&&i.touches,r=t,e,u;if(!this.isDisabled){if(f){if(e=f.length,e>1)if(o.zoomable&&o.zoomOnTouch&&e===2)r=f[1],this.startX2=r.pageX,this.startY2=r.pageY,u=ct;else return;r=f[0]}if(u=u||n(r.target).data(a),fr.test(u)){if(this.trigger(ft,{originalEvent:i,action:u}).isDefaultPrevented())return;t.preventDefault();this.action=u;this.cropping=!1;this.startX=r.pageX||i&&i.pageX;this.startY=r.pageY||i&&i.pageY;u===d&&(this.cropping=!0,this.$dragBox.addClass(l))}}},cropMove:function(n){var e=this.options,t=n.originalEvent,r=t&&t.touches,i=n,u=this.action,f;if(!this.isDisabled){if(r){if(f=r.length,f>1)if(e.zoomable&&e.zoomOnTouch&&f===2)i=r[1],this.endX2=i.pageX,this.endY2=i.pageY;else return;i=r[0]}if(u){if(this.trigger(et,{originalEvent:t,action:u}).isDefaultPrevented())return;n.preventDefault();this.endX=i.pageX||t&&t.pageX;this.endY=i.pageY||t&&t.pageY;this.change(i.shiftKey,u===ct?n:null)}}},cropEnd:function(n){var i=n.originalEvent,t=this.action;this.isDisabled||t&&(n.preventDefault(),this.cropping&&(this.cropping=!1,this.$dragBox.toggleClass(l,this.isCropped&&this.options.modal)),this.action="",this.trigger(ot,{originalEvent:i,action:t}))},change:function(n,i){var st=this.options,e=st.aspectRatio,l=this.action,et=this.container,ft=this.canvas,b=this.cropBox,u=b.width,f=b.height,c=b.left,s=b.top,ut=c+u,tt=s+f,it=0,k=0,rt=et.width,nt=et.height,a=!0,ot,r;!e&&n&&(e=u&&f?u/f:1);this.isLimited&&(it=b.minLeft,k=b.minTop,rt=it+t(et.width,ft.width,ft.left+ft.width),nt=k+t(et.height,ft.height,ft.top+ft.height));r={x:this.endX-this.startX,y:this.endY-this.startY};e&&(r.X=r.y*e,r.Y=r.x/e);switch(l){case ht:c+=r.x;s+=r.y;break;case hi:if(r.x>=0&&(ut>=rt||e&&(s<=k||tt>=nt))){a=!1;break}u+=r.x;e&&(f=u/e,s-=r.Y/2);u<0&&(l=ci,u=0);break;case ai:if(r.y<=0&&(s<=k||e&&(c<=it||ut>=rt))){a=!1;break}f-=r.y;s+=r.y;e&&(u=f*e,c+=r.X/2);f<0&&(l=li,f=0);break;case ci:if(r.x<=0&&(c<=it||e&&(s<=k||tt>=nt))){a=!1;break}u-=r.x;c+=r.x;e&&(f=u/e,s+=r.Y/2);u<0&&(l=hi,u=0);break;case li:if(r.y>=0&&(tt>=nt||e&&(c<=it||ut>=rt))){a=!1;break}f+=r.y;e&&(u=f*e,c-=r.X/2);f<0&&(l=ai,f=0);break;case p:if(e){if(r.y<=0&&(s<=k||ut>=rt)){a=!1;break}f-=r.y;s+=r.y;u=f*e}else r.x>=0?ut<rt?u+=r.x:r.y<=0&&s<=k&&(a=!1):u+=r.x,r.y<=0?s>k&&(f-=r.y,s+=r.y):(f-=r.y,s+=r.y);u<0&&f<0?(l=y,f=0,u=0):u<0?(l=w,u=0):f<0&&(l=v,f=0);break;case w:if(e){if(r.y<=0&&(s<=k||c<=it)){a=!1;break}f-=r.y;s+=r.y;u=f*e;c+=r.X}else r.x<=0?c>it?(u-=r.x,c+=r.x):r.y<=0&&s<=k&&(a=!1):(u-=r.x,c+=r.x),r.y<=0?s>k&&(f-=r.y,s+=r.y):(f-=r.y,s+=r.y);u<0&&f<0?(l=v,f=0,u=0):u<0?(l=p,u=0):f<0&&(l=y,f=0);break;case y:if(e){if(r.x<=0&&(c<=it||tt>=nt)){a=!1;break}u-=r.x;c+=r.x;f=u/e}else r.x<=0?c>it?(u-=r.x,c+=r.x):r.y>=0&&tt>=nt&&(a=!1):(u-=r.x,c+=r.x),r.y>=0?tt<nt&&(f+=r.y):f+=r.y;u<0&&f<0?(l=p,f=0,u=0):u<0?(l=v,u=0):f<0&&(l=w,f=0);break;case v:if(e){if(r.x>=0&&(ut>=rt||tt>=nt)){a=!1;break}u+=r.x;f=u/e}else r.x>=0?ut<rt?u+=r.x:r.y>=0&&tt>=nt&&(a=!1):u+=r.x,r.y>=0?tt<nt&&(f+=r.y):f+=r.y;u<0&&f<0?(l=w,f=0,u=0):u<0?(l=y,u=0):f<0&&(l=p,f=0);break;case g:this.move(r.x,r.y);a=!1;break;case ct:this.zoom(function(n,t,i,r){var u=pi(n*n+t*t),f=pi(i*i+r*r);return(f-u)/u}(h(this.startX-this.startX2),h(this.startY-this.startY2),h(this.endX-this.endX2),h(this.endY-this.endY2)),i);this.startX2=this.endX2;this.startY2=this.endY2;a=!1;break;case d:if(!r.x||!r.y){a=!1;break}ot=this.$cropper.offset();c=this.startX-ot.left;s=this.startY-ot.top;u=b.minWidth;f=b.minHeight;r.x>0?l=r.y>0?v:p:r.x<0&&(c-=u,l=r.y>0?y:w);r.y<0&&(s-=f);this.isCropped||(this.$cropBox.removeClass(o),this.isCropped=!0,this.isLimited&&this.limitCropBox(!0,!0))}a&&(b.width=u,b.height=f,b.left=c,b.top=s,this.action=l,this.renderCropBox());this.startX=this.endX;this.startY=this.endY},crop:function(){this.isBuilt&&!this.isDisabled&&(this.isCropped||(this.isCropped=!0,this.limitCropBox(!0,!0),this.options.modal&&this.$dragBox.addClass(l),this.$cropBox.removeClass(o)),this.setCropBoxData(this.initialCropBox))},reset:function(){this.isBuilt&&!this.isDisabled&&(this.image=n.extend({},this.initialImage),this.canvas=n.extend({},this.initialCanvas),this.cropBox=n.extend({},this.initialCropBox),this.renderCanvas(),this.isCropped&&this.renderCropBox())},clear:function(){this.isCropped&&!this.isDisabled&&(n.extend(this.cropBox,{left:0,top:0,width:0,height:0}),this.isCropped=!1,this.renderCropBox(),this.limitCanvas(!0,!0),this.renderCanvas(),this.$dragBox.removeClass(l),this.$cropBox.addClass(o))},replace:function(n,t){!this.isDisabled&&n&&(this.isImg&&this.$element.attr("src",n),t?(this.url=n,this.$clone.attr("src",n),this.isBuilt&&this.$preview.find("img").add(this.$clone2).attr("src",n)):(this.isImg&&(this.isReplaced=!0),this.options.data=null,this.load(n)))},enable:function(){this.isBuilt&&(this.isDisabled=!1,this.$cropper.removeClass(gt))},disable:function(){this.isBuilt&&(this.isDisabled=!0,this.$cropper.addClass(gt))},destroy:function(){var n=this.$element;this.isLoaded?(this.isImg&&this.isReplaced&&n.attr("src",this.originalUrl),this.unbuild(),n.removeClass(o)):this.isImg?n.off(ut,this.start):this.$clone&&this.$clone.remove();n.removeData(e)},move:function(n,t){var i=this.canvas;this.moveTo(c(n)?n:i.left+u(n),c(t)?t:i.top+u(t))},moveTo:function(n,t){var f=this.canvas,r=!1;c(t)&&(t=n);n=u(n);t=u(t);this.isBuilt&&!this.isDisabled&&this.options.movable&&(i(n)&&(f.left=n,r=!0),i(t)&&(f.top=t,r=!0),r&&this.renderCanvas(!0))},zoom:function(n,t){var i=this.canvas;n=u(n);n=n<0?1/(1-n):1+n;this.zoomTo(i.width*n/i.naturalWidth,t)},zoomTo:function(n,t){var a=this.options,i=this.canvas,e=i.width,s=i.height,h=i.naturalWidth,v=i.naturalHeight,r,f,o,c,l;if(n=u(n),n>=0&&this.isBuilt&&!this.isDisabled&&a.zoomable){if(f=h*n,o=v*n,t&&(r=t.originalEvent),this.trigger(st,{originalEvent:r,oldRatio:e/h,ratio:f/h}).isDefaultPrevented())return;r?(c=this.$cropper.offset(),l=r.touches?vr(r.touches):{pageX:t.pageX||r.pageX||0,pageY:t.pageY||r.pageY||0},i.left-=(f-e)*((l.pageX-c.left-i.left)/e),i.top-=(o-s)*((l.pageY-c.top-i.top)/s)):(i.left-=(f-e)/2,i.top-=(o-s)/2);i.width=f;i.height=o;this.renderCanvas(!0)}},rotate:function(n){this.rotateTo((this.image.rotate||0)+u(n))},rotateTo:function(n){n=u(n);i(n)&&this.isBuilt&&!this.isDisabled&&this.options.rotatable&&(this.image.rotate=n%360,this.isRotated=!0,this.renderCanvas(!0))},scale:function(n,t){var f=this.image,r=!1;c(t)&&(t=n);n=u(n);t=u(t);this.isBuilt&&!this.isDisabled&&this.options.scalable&&(i(n)&&(f.scaleX=n,r=!0),i(t)&&(f.scaleY=t,r=!0),r&&this.renderImage(!0))},scaleX:function(n){var t=this.image.scaleY;this.scale(n,i(t)?t:1)},scaleY:function(n){var t=this.image.scaleX;this.scale(i(t)?t:1,n)},getData:function(t){var f=this.options,r=this.image,e=this.canvas,u=this.cropBox,o,i;return this.isBuilt&&this.isCropped?(i={x:u.left-e.left,y:u.top-e.top,width:u.width,height:u.height},o=r.width/r.naturalWidth,n.each(i,function(n,r){r=r/o;i[n]=t?wi(r):r})):i={x:0,y:0,width:0,height:0},f.rotatable&&(i.rotate=r.rotate||0),f.scalable&&(i.scaleX=r.scaleX||1,i.scaleY=r.scaleY||1),i},setData:function(t){var o=this.options,r=this.image,s=this.canvas,u={},h,e,f;n.isFunction(t)&&(t=t.call(this.element));this.isBuilt&&!this.isDisabled&&n.isPlainObject(t)&&(o.rotatable&&i(t.rotate)&&t.rotate!==r.rotate&&(r.rotate=t.rotate,this.isRotated=h=!0),o.scalable&&(i(t.scaleX)&&t.scaleX!==r.scaleX&&(r.scaleX=t.scaleX,e=!0),i(t.scaleY)&&t.scaleY!==r.scaleY&&(r.scaleY=t.scaleY,e=!0)),h?this.renderCanvas():e&&this.renderImage(),f=r.width/r.naturalWidth,i(t.x)&&(u.left=t.x*f+s.left),i(t.y)&&(u.top=t.y*f+s.top),i(t.width)&&(u.width=t.width*f),i(t.height)&&(u.height=t.height*f),this.setCropBoxData(u))},getContainerData:function(){return this.isBuilt?this.container:{}},getImageData:function(){return this.isLoaded?this.image:{}},getCanvasData:function(){var i=this.canvas,t={};return this.isBuilt&&n.each(["left","top","width","height","naturalWidth","naturalHeight"],function(n,r){t[r]=i[r]}),t},setCanvasData:function(t){var r=this.canvas,u=r.aspectRatio;n.isFunction(t)&&(t=t.call(this.$element));this.isBuilt&&!this.isDisabled&&n.isPlainObject(t)&&(i(t.left)&&(r.left=t.left),i(t.top)&&(r.top=t.top),i(t.width)?(r.width=t.width,r.height=t.width/u):i(t.height)&&(r.height=t.height,r.width=t.height*u),this.renderCanvas(!0))},getCropBoxData:function(){var n=this.cropBox,t;return this.isBuilt&&this.isCropped&&(t={left:n.left,top:n.top,width:n.width,height:n.height}),t||{}},setCropBoxData:function(t){var r=this.cropBox,u=this.options.aspectRatio,f,e;n.isFunction(t)&&(t=t.call(this.$element));this.isBuilt&&this.isCropped&&!this.isDisabled&&n.isPlainObject(t)&&(i(t.left)&&(r.left=t.left),i(t.top)&&(r.top=t.top),i(t.width)&&(f=!0,r.width=t.width),i(t.height)&&(e=!0,r.height=t.height),u&&(f?r.height=r.width/u:e&&(r.width=r.height*u)),this.renderCropBox())},getCroppedCanvas:function(i){var r,u,v,y,s,c,e,p,l,a,o;if(this.isBuilt&&vi)return this.isCropped?(n.isPlainObject(i)||(i={}),o=this.getData(),r=o.width,u=o.height,p=r/u,n.isPlainObject(i)&&(s=i.width,c=i.height,s?(c=s/p,e=s/r):c&&(s=c*p,e=c/u)),v=f(s||r),y=f(c||u),l=n("<canvas>")[0],l.width=v,l.height=y,a=l.getContext("2d"),i.fillColor&&(a.fillStyle=i.fillColor,a.fillRect(0,0,v,y)),a.drawImage.apply(a,function(){var b=nr(this.$clone[0],this.image),y=b.width,p=b.height,d=this.canvas,k=[b],n=o.x+d.naturalWidth*(h(o.scaleX||1)-1)/2,i=o.y+d.naturalHeight*(h(o.scaleY||1)-1)/2,l,w,a,v,s,c;return n<=-r||n>y?n=l=a=s=0:n<=0?(a=-n,n=0,l=s=t(y,r+n)):n<=y&&(a=0,l=s=t(r,y-n)),l<=0||i<=-u||i>p?i=w=v=c=0:i<=0?(v=-i,i=0,w=c=t(p,u+i)):i<=p&&(v=0,w=c=t(u,p-i)),k.push(f(n),f(i),f(l),f(w)),e&&(a*=e,v*=e,s*=e,c*=e),s>0&&c>0&&k.push(f(a),f(v),f(s),f(c)),k}.call(this)),l):nr(this.$clone[0],this.image)},setAspectRatio:function(n){var t=this.options;this.isDisabled||c(n)||(t.aspectRatio=r(0,n)||NaN,this.isBuilt&&(this.initCropBox(),this.isCropped&&this.renderCropBox()))},setDragMode:function(n){var r=this.options,t,i;this.isLoaded&&!this.isDisabled&&(t=n===d,i=r.movable&&n===g,n=t||i?n:hr,this.$dragBox.data(a,n).toggleClass(rt,t).toggleClass(it,i),r.cropBoxMovable||this.$face.data(a,n).toggleClass(rt,t).toggleClass(it,i))}};s.DEFAULTS={viewMode:0,dragMode:"crop",aspectRatio:NaN,data:null,preview:"",responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,autoCropArea:.8,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,wheelZoomRatio:.1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:200,minContainerHeight:100,build:null,built:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null};s.setDefaults=function(t){n.extend(s.DEFAULTS,t)};s.TEMPLATE='<div class="cropper-container"><div class="cropper-wrap-box"><div class="cropper-canvas"><\/div><\/div><div class="cropper-drag-box"><\/div><div class="cropper-crop-box"><span class="cropper-view-box"><\/span><span class="cropper-dashed dashed-h"><\/span><span class="cropper-dashed dashed-v"><\/span><span class="cropper-center"><\/span><span class="cropper-face"><\/span><span class="cropper-line line-e" data-action="e"><\/span><span class="cropper-line line-n" data-action="n"><\/span><span class="cropper-line line-w" data-action="w"><\/span><span class="cropper-line line-s" data-action="s"><\/span><span class="cropper-point point-e" data-action="e"><\/span><span class="cropper-point point-n" data-action="n"><\/span><span class="cropper-point point-w" data-action="w"><\/span><span class="cropper-point point-s" data-action="s"><\/span><span class="cropper-point point-ne" data-action="ne"><\/span><span class="cropper-point point-nw" data-action="nw"><\/span><span class="cropper-point point-sw" data-action="sw"><\/span><span class="cropper-point point-se" data-action="se"><\/span><\/div><\/div>';s.other=n.fn.cropper;n.fn.cropper=function(t){var r=lt(arguments,1),i;return this.each(function(){var f=n(this),u=f.data(e),o,h;if(!u){if(/destroy/.test(t))return;o=n.extend({},f.data(),n.isPlainObject(t)&&t);f.data(e,u=new s(this,o))}typeof t=="string"&&n.isFunction(h=u[t])&&(i=h.apply(u,r))}),c(i)?this:i};n.fn.cropper.Constructor=s;n.fn.cropper.setDefaults=s.setDefaults;n.fn.cropper.noConflict=function(){return n.fn.cropper=s.other,this}});